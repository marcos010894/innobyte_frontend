# ğŸ” Como Funciona o Login - Guia Visual

## ğŸ¯ Tela de Login Completa

Quando vocÃª acessa `http://localhost:5173/login`, verÃ¡ esta tela:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚         Sistema de Etiquetas                     â”‚
â”‚         Bem-vindo de volta!                      â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [ğŸ‘¤ Cliente]  â”‚  [ğŸ‘‘ Administrador]     â”‚ â”‚
â”‚  â”‚    ATIVO       â”‚      INATIVO             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                  â”‚
â”‚  E-mail                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ seu@email.com                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚  Senha                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Entrar ğŸ‘¤                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚  Problemas com sua conta?                        â”‚
â”‚  Entre em contato                                â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Como Escolher o Tipo de Login

### 1ï¸âƒ£ **Por PadrÃ£o - Cliente Selecionado**

Quando a pÃ¡gina carrega, **Cliente** jÃ¡ vem selecionado:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ‘¤ Cliente]  â”‚  [ğŸ‘‘ Administrador]     â”‚
â”‚    BRANCO      â”‚      CINZA              â”‚
â”‚    ATIVO âœ“     â”‚      INATIVO            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Cliente**: Fundo branco + texto azul + sombra
- **Administrador**: Fundo transparente + texto cinza

---

### 2ï¸âƒ£ **Clicando em "Cliente"**

Se vocÃª clicar em **"ğŸ‘¤ Cliente"**:

```typescript
Estado: tipoLogin = 'cliente'
Endpoint usado: /api/auth/login-cliente
```

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ‘¤ Cliente]  â”‚  [ğŸ‘‘ Administrador]     â”‚
â”‚  âœ… SELECIONADO â”‚      Clique aqui       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Comportamento:**
- Fundo **branco**
- Texto **azul (primary)**
- **Sombra** suave
- Ao clicar "Entrar", chama `loginCliente()`
- Endpoint: `POST /api/auth/login-cliente`

---

### 3ï¸âƒ£ **Clicando em "Administrador"**

Se vocÃª clicar em **"ğŸ‘‘ Administrador"**:

```typescript
Estado: tipoLogin = 'master'
Endpoint usado: /api/auth/login
```

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ‘¤ Cliente]  â”‚  [ğŸ‘‘ Administrador]     â”‚
â”‚   Clique aqui   â”‚  âœ… SELECIONADO        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Comportamento:**
- Fundo **branco**
- Texto **azul (primary)**
- **Sombra** suave
- Ao clicar "Entrar", chama `loginMaster()`
- Endpoint: `POST /api/auth/login`

---

## ğŸ¬ Fluxo Completo de Login

### Login como CLIENTE

```
1. UsuÃ¡rio acessa: http://localhost:5173/login
   â†“
2. VÃª a tela com "ğŸ‘¤ Cliente" JÃ SELECIONADO
   â†“
3. Digite o email (ex: cliente@empresa.com)
   â†“
4. Digite a senha
   â†“
5. Clique em "Entrar ğŸ‘¤"
   â†“
6. Sistema executa:
   const result = await loginCliente(email, senha);
   â†“
7. Faz requisiÃ§Ã£o:
   POST http://127.0.0.1:8000//auth/login-cliente
   Body: {
     "email": "cliente@empresa.com",
     "password": "senha123"
   }
   â†“
8. Backend valida:
   âœ… Credenciais corretas?
   âœ… Conta ativa?
   âœ… LicenÃ§a nÃ£o bloqueada?
   âœ… LicenÃ§a nÃ£o vencida?
   â†“
9. Backend retorna:
   {
     "access_token": "eyJhbGci...",
     "token_type": "bearer",
     "user": {
       "id": 1,
       "email": "cliente@empresa.com",
       "tipo": "cliente",
       "licenca": { ... }
     }
   }
   â†“
10. Frontend salva:
    localStorage.setItem('access_token', token)
    localStorage.setItem('user_type', 'cliente')
    â†“
11. Redireciona para:
    http://localhost:5173/dashboard
```

### Login como MASTER

```
1. UsuÃ¡rio acessa: http://localhost:5173/login
   â†“
2. VÃª "ğŸ‘¤ Cliente" selecionado
   â†“
3. CLICA EM "ğŸ‘‘ Administrador"
   â†“
4. BotÃ£o muda de cor (fica branco/azul)
   â†“
5. Digite o email (ex: admin@sistema.com)
   â†“
6. Digite a senha
   â†“
7. Clique em "Entrar ğŸ‘‘"
   â†“
8. Sistema executa:
   const result = await loginMaster(email, senha);
   â†“
9. Faz requisiÃ§Ã£o:
   POST http://127.0.0.1:8000//auth/login
   Body: {
     "email": "admin@sistema.com",
     "password": "senha123"
   }
   â†“
10. Backend valida credenciais
    â†“
11. Backend retorna:
    {
      "access_token": "eyJhbGci...",
      "token_type": "bearer",
      "user": {
        "id": 1,
        "email": "admin@sistema.com",
        "tipo": "master"
      }
    }
    â†“
12. Frontend salva:
    localStorage.setItem('access_token', token)
    localStorage.setItem('user_type', 'master')
    â†“
13. Redireciona para:
    http://localhost:5173/dashboard
```

---

## ğŸ¨ Estados Visuais dos BotÃµes

### Estado 1: Cliente Selecionado (PadrÃ£o)
```css
ğŸ‘¤ Cliente
- background: white
- color: blue (primary)
- shadow: small
- font-weight: medium

ğŸ‘‘ Administrador
- background: transparent
- color: gray-600
- shadow: none
- hover: text-gray-800
```

### Estado 2: Administrador Selecionado
```css
ğŸ‘¤ Cliente
- background: transparent
- color: gray-600
- shadow: none
- hover: text-gray-800

ğŸ‘‘ Administrador
- background: white
- color: blue (primary)
- shadow: small
- font-weight: medium
```

---

## ğŸ’» CÃ³digo por TrÃ¡s

### Estado (useState)
```typescript
const [tipoLogin, setTipoLogin] = useState<TipoLogin>('cliente');
// Por padrÃ£o, comeÃ§a como 'cliente'
```

### BotÃ£o Cliente
```typescript
<button
  type="button"
  onClick={() => setTipoLogin('cliente')}
  className={tipoLogin === 'cliente' 
    ? 'bg-white text-primary shadow-sm'  // Se selecionado
    : 'text-gray-600 hover:text-gray-800' // Se nÃ£o selecionado
  }
>
  ğŸ‘¤ Cliente
</button>
```

### BotÃ£o Master
```typescript
<button
  type="button"
  onClick={() => setTipoLogin('master')}
  className={tipoLogin === 'master'
    ? 'bg-white text-primary shadow-sm'  // Se selecionado
    : 'text-gray-600 hover:text-gray-800' // Se nÃ£o selecionado
  }
>
  ğŸ‘‘ Administrador
</button>
```

### LÃ³gica de Submit
```typescript
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();
  
  const result = tipoLogin === 'master'
    ? await loginMaster(email, senha)    // Chama /api/auth/login
    : await loginCliente(email, senha);  // Chama /api/auth/login-cliente
  
  if (result.success) {
    navigate('/dashboard');
  }
};
```

---

## ğŸ§ª Como Testar

### Teste 1: Login como Cliente
```
1. Acesse: http://localhost:5173/login
2. Veja que "ğŸ‘¤ Cliente" JÃ estÃ¡ selecionado (fundo branco)
3. Digite email: cliente@empresa.com
4. Digite senha: sua_senha
5. Clique "Entrar"
6. Console mostra: "âœ… Login Cliente realizado com sucesso"
7. Redireciona para /dashboard
8. Sidebar mostra apenas funcionalidades permitidas
```

### Teste 2: Login como Master
```
1. Acesse: http://localhost:5173/login
2. CLIQUE em "ğŸ‘‘ Administrador"
3. Veja o botÃ£o mudar de cor (fundo branco)
4. Digite email: admin@sistema.com
5. Digite senha: sua_senha
6. Clique "Entrar"
7. Console mostra: "âœ… Login Master realizado com sucesso"
8. Redireciona para /dashboard
9. Sidebar mostra TODAS as opÃ§Ãµes (incluindo UsuÃ¡rios)
```

---

## ğŸ” Como Verificar Qual Tipo Foi Usado

### No Console do Navegador (F12)
```javascript
// Verificar tipo de login salvo
localStorage.getItem('user_type')
// Retorna: 'master' ou 'cliente'

// Verificar token
localStorage.getItem('access_token')
// Retorna: 'eyJhbGciOiJIUzI1NiIs...'
```

### No Network (F12 â†’ Network)
```
Quando clica "Entrar", veja a requisiÃ§Ã£o:

Cliente:
Request URL: http://127.0.0.1:8000//auth/login-cliente
Request Method: POST
Status Code: 200 OK

Master:
Request URL: http://127.0.0.1:8000//auth/login
Request Method: POST
Status Code: 200 OK
```

---

## â“ Perguntas Frequentes

### 1. Como sei qual botÃ£o estÃ¡ selecionado?
**R:** O botÃ£o selecionado tem:
- âœ… Fundo **branco**
- âœ… Texto **azul**
- âœ… **Sombra** suave

O nÃ£o selecionado tem:
- âŒ Fundo **transparente**
- âŒ Texto **cinza**

### 2. Posso mudar de tipo antes de fazer login?
**R:** Sim! Clique quantas vezes quiser entre Cliente e Administrador. O sistema sÃ³ envia a requisiÃ§Ã£o quando vocÃª clica em "Entrar".

### 3. O que acontece se eu esquecer de mudar para Master?
**R:** Se tentar logar como Master mas deixar "Cliente" selecionado, o backend vai retornar erro "E-mail ou senha incorretos" (porque a conta de Master nÃ£o existe na tabela de clientes).

### 4. Onde estÃ¡ o cÃ³digo que decide qual endpoint usar?
**R:** Na linha 23-25 do `LoginPage.tsx`:
```typescript
const result = tipoLogin === 'master'
  ? await loginMaster(email, senha)    // /api/auth/login
  : await loginCliente(email, senha);  // /api/auth/login-cliente
```

---

## âœ… Resumo

**Para fazer login como CLIENTE:**
1. Acesse `/login`
2. Deixe "ğŸ‘¤ Cliente" selecionado (jÃ¡ vem por padrÃ£o)
3. Digite email/senha
4. Clique "Entrar"
5. âœ… Usa endpoint: `/api/auth/login-cliente`

**Para fazer login como MASTER:**
1. Acesse `/login`
2. **CLIQUE em "ğŸ‘‘ Administrador"**
3. Digite email/senha
4. Clique "Entrar"
5. âœ… Usa endpoint: `/api/auth/login`

**Ã‰ simples assim!** ğŸ‰
